@model AntWay.Dashboard.Web.ViewModels.IndexViewModel

<!DOCTYPE html>
<html lang="en">
<!-- begin::Head -->
<head>
    <meta charset="utf-8" />
    <title>
        AntWay | Dashboard
    </title>
    <meta name="description" content="Latest updates and statistic charts">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!--begin::Web font -->
    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.16/webfont.js"></script>
    <script>
        WebFont.load({
            google: { "families": ["Montserrat:300,400,500,600,700", "Roboto:300,400,500,600,700"] },
            active: function () {
                sessionStorage.fonts = true;
            }
        });
    </script>
    <!--end::Web font -->
    <link href="/assets/vendors/base/vendors.bundle.css" rel="stylesheet" type="text/css" />
    <link href="/assets/demo/demo3/base/style.bundle.css" rel="stylesheet" type="text/css" />
    <!--end::Base Styles -->
    <link rel="shortcut icon" href="/assets/demo/demo3/media/img/logo/favicon.ico" />


    <script src="~/assets/chart/Chart.bundle.js"></script>
    <script src="~/assets/chart/Utils.js"></script>
</head>
<!-- end::Head -->

<style>
    .m-brand {
        padding: 5px 0px;
    }
</style>


<body class="m-page--fluid m--skin- m-content--skin-light2 m-header--fixed m-header--fixed-mobile m-aside-left--enabled m-aside-left--skin-dark m-aside-left--fixed m-aside-left--offcanvas m-footer--push m-aside--offcanvas-default">



    <!-- begin:: Page -->
    <div class="m-grid m-grid--hor m-grid--root m-page">
        <!-- BEGIN: Header -->
        <header id="m_header" class="m-grid__item m-header " minimize-offset="200" minimize-mobile-offset="200">
            <div class="m-container m-container--fluid m-container--full-height">
                <div class="m-stack m-stack--ver m-stack--desktop">
                    <!-- BEGIN: Brand -->
                    <div class="m-stack__item m-brand  m-brand--skin-dark ">
                        <div class="m-stack m-stack--ver m-stack--general">
                            <div class="m-stack__item m-stack__item--middle m-stack__item--center m-brand__logo">
                                <a href="/index.html" class="m-brand__logo-wrapper">
                                    <img alt="" src="/images/logo.png" />
                                </a>
                            </div>
                        </div>
                    </div>
                    <!-- END: Brand -->
                    <div class="m-stack__item m-stack__item--fluid m-header-head" id="m_header_nav">
                        @*<h2>Dashboard</h2>*@
                        <!-- BEGIN: Horizontal Menu -->
                        <button class="m-aside-header-menu-mobile-close  m-aside-header-menu-mobile-close--skin-dark " id="m_aside_header_menu_mobile_close_btn">
                            <i class="la la-close"></i>
                        </button>
                        <div id="m_header_menu" class="m-header-menu m-aside-header-menu-mobile m-aside-header-menu-mobile--offcanvas  m-header-menu--skin-light m-header-menu--submenu-skin-light m-aside-header-menu-mobile--skin-dark m-aside-header-menu-mobile--submenu-skin-dark ">
                        </div>
                        <!-- END: Horizontal Menu -->								<!-- BEGIN: Topbar -->

                        <div id="m_header_topbar" class="m-topbar  m-stack m-stack--ver m-stack--general">
                            <div class="m-stack__item m-topbar__nav-wrapper">
                                <ul class="m-topbar__nav m-nav m-nav--inline">
                                    <li class="
	m-nav__item m-dropdown m-dropdown--large m-dropdown--arrow m-dropdown--align-center m-dropdown--mobile-full-width m-dropdown--skin-light	m-list-search m-list-search--skin-light"
                                        m-dropdown-toggle="click" m-dropdown-persistent="1" id="m_quicksearch" m-quicksearch-mode="dropdown">
                                        @*<a href="/#" class="m-nav__link m-dropdown__toggle">
                                                <span class="m-nav__link-icon">
                                                    <i class="flaticon-search-1"></i>
                                                </span>
                                            </a>*@
                                        <div class="m-dropdown__wrapper">
                                            <span class="m-dropdown__arrow m-dropdown__arrow--center"></span>
                                            <div class="m-dropdown__inner ">
                                                <div class="m-dropdown__header">
                                                    <form class="m-list-search__form">
                                                        <div class="m-list-search__form-wrapper">
                                                            <span class="m-list-search__form-input-wrapper">
                                                                <input id="m_quicksearch_input" autocomplete="off" type="text" name="q" class="m-list-search__form-input" value="" placeholder="Search...">
                                                            </span>
                                                            <span class="m-list-search__form-icon-close" id="m_quicksearch_close">
                                                                <i class="la la-remove"></i>
                                                            </span>
                                                        </div>
                                                    </form>
                                                </div>
                                                <div class="m-dropdown__body">
                                                    <div class="m-dropdown__scrollable m-scrollable" data-scrollable="true" data-max-height="300" data-mobile-max-height="200">
                                                        <div class="m-dropdown__content"></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </li>
                                    <li class="m-nav__item m-topbar__notifications m-topbar__notifications--img m-dropdown m-dropdown--large m-dropdown--header-bg-fill m-dropdown--arrow m-dropdown--align-center 	m-dropdown--mobile-full-width" m-dropdown-toggle="click" m-dropdown-persistent="1">
                                        <a href="/#" class="m-nav__link m-dropdown__toggle" id="m_topbar_notification_icon">
                                            <span class="m-nav__link-badge m-badge m-badge--accent">
                                                3
                                            </span>
                                            <span class="m-nav__link-icon">
                                                <i class="flaticon-alert-2"></i>
                                            </span>
                                        </a>
                                        <div class="m-dropdown__wrapper">
                                            <span class="m-dropdown__arrow m-dropdown__arrow--center"></span>
                                            <div class="m-dropdown__inner">
                                                <div class="m-dropdown__header m--align-center" style="background: url(assets/app/media/img/misc/notification_bg.jpg); background-size: cover;">
                                                    <span class="m-dropdown__header-title">
                                                        9 New
                                                    </span>
                                                    <span class="m-dropdown__header-subtitle">
                                                        User Notifications
                                                    </span>
                                                </div>
                                                <div class="m-dropdown__body">
                                                    <div class="m-dropdown__content">
                                                        <ul class="nav nav-tabs m-tabs m-tabs-line m-tabs-line--brand" role="tablist">
                                                            <li class="nav-item m-tabs__item">
                                                                <a class="nav-link m-tabs__link active" data-toggle="tab" href="/#topbar_notifications_notifications" role="tab">
                                                                    Alerts
                                                                </a>
                                                            </li>
                                                            <li class="nav-item m-tabs__item">
                                                                <a class="nav-link m-tabs__link" data-toggle="tab" href="/#topbar_notifications_events" role="tab">
                                                                    Events
                                                                </a>
                                                            </li>
                                                            <li class="nav-item m-tabs__item">
                                                                <a class="nav-link m-tabs__link" data-toggle="tab" href="/#topbar_notifications_logs" role="tab">
                                                                    Logs
                                                                </a>
                                                            </li>
                                                        </ul>
                                                        <div class="tab-content">
                                                            <div class="tab-pane active" id="topbar_notifications_notifications" role="tabpanel">
                                                                <div class="m-scrollable" data-scrollable="true" data-max-height="250" data-mobile-max-height="200">
                                                                    <div class="m-list-timeline m-list-timeline--skin-light">
                                                                        <div class="m-list-timeline__items">
                                                                            <div class="m-list-timeline__item">
                                                                                <span class="m-list-timeline__badge -m-list-timeline__badge--state-success"></span>
                                                                                <span class="m-list-timeline__text">
                                                                                    12 new users registered
                                                                                </span>
                                                                                <span class="m-list-timeline__time">
                                                                                    Just now
                                                                                </span>
                                                                            </div>
                                                                            <div class="m-list-timeline__item">
                                                                                <span class="m-list-timeline__badge"></span>
                                                                                <span class="m-list-timeline__text">
                                                                                    System shutdown
                                                                                    <span class="m-badge m-badge--success m-badge--wide">
                                                                                        pending
                                                                                    </span>
                                                                                </span>
                                                                                <span class="m-list-timeline__time">
                                                                                    14 mins
                                                                                </span>
                                                                            </div>
                                                                            <div class="m-list-timeline__item">
                                                                                <span class="m-list-timeline__badge"></span>
                                                                                <span class="m-list-timeline__text">
                                                                                    New invoice received
                                                                                </span>
                                                                                <span class="m-list-timeline__time">
                                                                                    20 mins
                                                                                </span>
                                                                            </div>
                                                                            <div class="m-list-timeline__item">
                                                                                <span class="m-list-timeline__badge"></span>
                                                                                <span class="m-list-timeline__text">
                                                                                    DB overloaded 80%
                                                                                    <span class="m-badge m-badge--info m-badge--wide">
                                                                                        settled
                                                                                    </span>
                                                                                </span>
                                                                                <span class="m-list-timeline__time">
                                                                                    1 hr
                                                                                </span>
                                                                            </div>
                                                                            <div class="m-list-timeline__item">
                                                                                <span class="m-list-timeline__badge"></span>
                                                                                <span class="m-list-timeline__text">
                                                                                    System error -
                                                                                    <a href="/#" class="m-link">
                                                                                        Check
                                                                                    </a>
                                                                                </span>
                                                                                <span class="m-list-timeline__time">
                                                                                    2 hrs
                                                                                </span>
                                                                            </div>
                                                                            <div class="m-list-timeline__item m-list-timeline__item--read">
                                                                                <span class="m-list-timeline__badge"></span>
                                                                                <span href="/" class="m-list-timeline__text">
                                                                                    New order received
                                                                                    <span class="m-badge m-badge--danger m-badge--wide">
                                                                                        urgent
                                                                                    </span>
                                                                                </span>
                                                                                <span class="m-list-timeline__time">
                                                                                    7 hrs
                                                                                </span>
                                                                            </div>
                                                                            <div class="m-list-timeline__item m-list-timeline__item--read">
                                                                                <span class="m-list-timeline__badge"></span>
                                                                                <span class="m-list-timeline__text">
                                                                                    Production server down
                                                                                </span>
                                                                                <span class="m-list-timeline__time">
                                                                                    3 hrs
                                                                                </span>
                                                                            </div>
                                                                            <div class="m-list-timeline__item">
                                                                                <span class="m-list-timeline__badge"></span>
                                                                                <span class="m-list-timeline__text">
                                                                                    Production server up
                                                                                </span>
                                                                                <span class="m-list-timeline__time">
                                                                                    5 hrs
                                                                                </span>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="tab-pane" id="topbar_notifications_events" role="tabpanel">
                                                                <div class="m-scrollable" data-scrollable="true" data-max-height="250" data-mobile-max-height="200">
                                                                    <div class="m-list-timeline m-list-timeline--skin-light">
                                                                        <div class="m-list-timeline__items">
                                                                            <div class="m-list-timeline__item">
                                                                                <span class="m-list-timeline__badge m-list-timeline__badge--state1-success"></span>
                                                                                <a href="/" class="m-list-timeline__text">
                                                                                    New order received
                                                                                </a>
                                                                                <span class="m-list-timeline__time">
                                                                                    Just now
                                                                                </span>
                                                                            </div>
                                                                            <div class="m-list-timeline__item">
                                                                                <span class="m-list-timeline__badge m-list-timeline__badge--state1-danger"></span>
                                                                                <a href="/" class="m-list-timeline__text">
                                                                                    New invoice received
                                                                                </a>
                                                                                <span class="m-list-timeline__time">
                                                                                    20 mins
                                                                                </span>
                                                                            </div>
                                                                            <div class="m-list-timeline__item">
                                                                                <span class="m-list-timeline__badge m-list-timeline__badge--state1-success"></span>
                                                                                <a href="/" class="m-list-timeline__text">
                                                                                    Production server up
                                                                                </a>
                                                                                <span class="m-list-timeline__time">
                                                                                    5 hrs
                                                                                </span>
                                                                            </div>
                                                                            <div class="m-list-timeline__item">
                                                                                <span class="m-list-timeline__badge m-list-timeline__badge--state1-info"></span>
                                                                                <a href="/" class="m-list-timeline__text">
                                                                                    New order received
                                                                                </a>
                                                                                <span class="m-list-timeline__time">
                                                                                    7 hrs
                                                                                </span>
                                                                            </div>
                                                                            <div class="m-list-timeline__item">
                                                                                <span class="m-list-timeline__badge m-list-timeline__badge--state1-info"></span>
                                                                                <a href="/" class="m-list-timeline__text">
                                                                                    System shutdown
                                                                                </a>
                                                                                <span class="m-list-timeline__time">
                                                                                    11 mins
                                                                                </span>
                                                                            </div>
                                                                            <div class="m-list-timeline__item">
                                                                                <span class="m-list-timeline__badge m-list-timeline__badge--state1-info"></span>
                                                                                <a href="/" class="m-list-timeline__text">
                                                                                    Production server down
                                                                                </a>
                                                                                <span class="m-list-timeline__time">
                                                                                    3 hrs
                                                                                </span>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="tab-pane" id="topbar_notifications_logs" role="tabpanel">
                                                                <div class="m-stack m-stack--ver m-stack--general" style="min-height: 180px;">
                                                                    <div class="m-stack__item m-stack__item--center m-stack__item--middle">
                                                                        <span class="">
                                                                            All caught up!
                                                                            <br>
                                                                            No new logs.
                                                                        </span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </li>
                                    <li class="m-nav__item m-topbar__quick-actions m-topbar__quick-actions--img m-dropdown m-dropdown--large m-dropdown--header-bg-fill m-dropdown--arrow m-dropdown--align-right m-dropdown--align-push m-dropdown--mobile-full-width m-dropdown--skin-light" m-dropdown-toggle="click">
                                        <a href="/#" class="m-nav__link m-dropdown__toggle">
                                            <span class="m-nav__link-badge m-badge m-badge--dot m-badge--info m--hide"></span>
                                            <span class="m-nav__link-icon">
                                                <i class="flaticon-clipboard"></i>
                                            </span>
                                        </a>
                                        <div class="m-dropdown__wrapper">
                                            <span class="m-dropdown__arrow m-dropdown__arrow--right m-dropdown__arrow--adjust"></span>
                                            <div class="m-dropdown__inner">
                                                <div class="m-dropdown__header m--align-center" style="background: url(assets/app/media/img/misc/quick_actions_bg.jpg); background-size: cover;">
                                                    <span class="m-dropdown__header-title">
                                                        Quick Actions
                                                    </span>
                                                    <span class="m-dropdown__header-subtitle">
                                                        Shortcuts
                                                    </span>
                                                </div>
                                                <div class="m-dropdown__body m-dropdown__body--paddingless">
                                                    <div class="m-dropdown__content">
                                                        <div class="m-scrollable" data-scrollable="false" data-max-height="380" data-mobile-max-height="200">
                                                            <div class="m-nav-grid m-nav-grid--skin-light">
                                                                <div class="m-nav-grid__row">
                                                                    <a href="/#" class="m-nav-grid__item">
                                                                        <i class="m-nav-grid__icon flaticon-file"></i>
                                                                        <span class="m-nav-grid__text">
                                                                            Generate Report
                                                                        </span>
                                                                    </a>
                                                                    <a href="/#" class="m-nav-grid__item">
                                                                        <i class="m-nav-grid__icon flaticon-time"></i>
                                                                        <span class="m-nav-grid__text">
                                                                            Add New Event
                                                                        </span>
                                                                    </a>
                                                                </div>
                                                                <div class="m-nav-grid__row">
                                                                    <a href="/#" class="m-nav-grid__item">
                                                                        <i class="m-nav-grid__icon flaticon-folder"></i>
                                                                        <span class="m-nav-grid__text">
                                                                            Create New Task
                                                                        </span>
                                                                    </a>
                                                                    <a href="/#" class="m-nav-grid__item">
                                                                        <i class="m-nav-grid__icon flaticon-clipboard"></i>
                                                                        <span class="m-nav-grid__text">
                                                                            Completed Tasks
                                                                        </span>
                                                                    </a>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </li>
                                    <li class="m-nav__item m-topbar__user-profile m-topbar__user-profile--img m-dropdown m-dropdown--medium m-dropdown--arrow m-dropdown--header-bg-fill m-dropdown--align-right m-dropdown--mobile-full-width m-dropdown--skin-light" m-dropdown-toggle="click">
                                        <a href="/#" class="m-nav__link m-dropdown__toggle">
                                            <span class="m-topbar__userpic">
                                                <img src="assets/app/media/img/users/user3.jpg" alt="" />
                                            </span>
                                        </a>
                                        <div class="m-dropdown__wrapper">
                                            <span class="m-dropdown__arrow m-dropdown__arrow--right m-dropdown__arrow--adjust"></span>
                                            <div class="m-dropdown__inner">
                                                <div class="m-dropdown__header m--align-center" style="background: url(assets/app/media/img/misc/user_profile_bg.jpg); background-size: cover;">
                                                    <div class="m-card-user m-card-user--skin-dark">
                                                        <div class="m-card-user__pic">
                                                            <img src="assets/app/media/img/users/user3.jpg" alt="" />
                                                        </div>
                                                        <div class="m-card-user__details">
                                                            <span class="m-card-user__name m--font-weight-500">
                                                                Lisa Strong
                                                            </span>
                                                            <a href="/" class="m-card-user__email m--font-weight-300 m-link">
                                                                lisa.strong@gmail.com
                                                            </a>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="m-dropdown__body">
                                                    <div class="m-dropdown__content">
                                                        <ul class="m-nav m-nav--skin-light">
                                                            <li class="m-nav__section m--hide">
                                                                <span class="m-nav__section-text">
                                                                    Section
                                                                </span>
                                                            </li>
                                                            <li class="m-nav__item">
                                                                <a href="/profile.html" class="m-nav__link">
                                                                    <i class="m-nav__link-icon flaticon-profile-1"></i>
                                                                    <span class="m-nav__link-title">
                                                                        <span class="m-nav__link-wrap">
                                                                            <span class="m-nav__link-text">
                                                                                My Profile
                                                                            </span>
                                                                            <span class="m-nav__link-badge">
                                                                                <span class="m-badge m-badge--success">
                                                                                    2
                                                                                </span>
                                                                            </span>
                                                                        </span>
                                                                    </span>
                                                                </a>
                                                            </li>
                                                            <li class="m-nav__item">
                                                                <a href="/profile.html" class="m-nav__link">
                                                                    <i class="m-nav__link-icon flaticon-share"></i>
                                                                    <span class="m-nav__link-text">
                                                                        Activity
                                                                    </span>
                                                                </a>
                                                            </li>
                                                            <li class="m-nav__item">
                                                                <a href="/profile.html" class="m-nav__link">
                                                                    <i class="m-nav__link-icon flaticon-chat-1"></i>
                                                                    <span class="m-nav__link-text">
                                                                        Messages
                                                                    </span>
                                                                </a>
                                                            </li>
                                                            <li class="m-nav__separator m-nav__separator--fit"></li>
                                                            <li class="m-nav__item">
                                                                <a href="/profile.html" class="m-nav__link">
                                                                    <i class="m-nav__link-icon flaticon-info"></i>
                                                                    <span class="m-nav__link-text">
                                                                        FAQ
                                                                    </span>
                                                                </a>
                                                            </li>
                                                            <li class="m-nav__item">
                                                                <a href="/profile.html" class="m-nav__link">
                                                                    <i class="m-nav__link-icon flaticon-lifebuoy"></i>
                                                                    <span class="m-nav__link-text">
                                                                        Support
                                                                    </span>
                                                                </a>
                                                            </li>
                                                            <li class="m-nav__separator m-nav__separator--fit"></li>
                                                            <li class="m-nav__item">
                                                                <a href="/snippets/pages/user/login-1.html" class="btn m-btn--pill    btn-secondary m-btn m-btn--custom m-btn--label-brand m-btn--bolder">
                                                                    Logout
                                                                </a>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </li>
                                    <li id="m_quick_sidebar_toggle" class="m-nav__item">
                                        <a href="/#" class="m-nav__link m-dropdown__toggle">
                                            <span class="m-nav__link-icon">
                                                <i class="flaticon-menu-button"></i>
                                            </span>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <!-- END: Topbar -->
                    </div>
                </div>
            </div>
        </header>
        <!-- END: Header -->
        <!-- begin::Body -->
        <div class="m-grid__item m-grid__item--fluid m-grid m-grid--ver-desktop m-grid--desktop m-body">
            <!-- BEGIN: Left Aside -->
            <button class="m-aside-left-close m-aside-left-close--skin-dark" id="m_aside_left_close_btn">
                <i class="la la-close"></i>
            </button>
            <div id="m_aside_left" class="m-grid__item	m-aside-left  m-aside-left--skin-dark ">
                <!-- BEGIN: Aside Menu -->
                <div id="m_ver_menu"
                     class="m-aside-menu  m-aside-menu--skin-dark m-aside-menu--submenu-skin-dark m-aside-menu--dropdown "
                     data-menu-vertical="true"
                     m-menu-dropdown="1" m-menu-scrollable="1" m-menu-dropdown-timeout="500">
                    <ul class="m-menu__nav  m-menu__nav--dropdown-submenu-arrow ">
                        <li class="m-menu__item m-menu__item--active" 
                            data-tabname="tabDashboard"  aria-haspopup="true">
                            <a href="javascript:selectTab('tabDashboard')" class="m-menu__link ">
                                <span class="m-menu__item-here"></span>
                                <i class="m-menu__link-icon flaticon-line-graph"></i>
                                <span class="m-menu__link-text">
                                    Dashboard
                                </span>
                            </a>
                        </li>
                        <li class="m-menu__item" 
                            data-tabname="tabEsquemas" aria-haspopup="true">
                            <a href="javascript:selectTab('tabEsquemas')" class="m-menu__link ">
                                <span class="m-menu__item-here"></span>
                                <i class="m-menu__link-icon flaticon-line-graph"></i>
                                <span class="m-menu__link-text">
                                    Esquemas
                                </span>
                            </a>
                        </li>
                        @*<li class="m-menu__item  m-menu__item" aria-haspopup="true" m-menu-submenu-toggle="hover">
                            <a href="javascript:selectTab('tabEsquemas')" class="m-menu__link m-menu__toggle">
                                <span class="m-menu__item-here"></span>
                                <i class="m-menu__link-icon flaticon-open-box"></i>
                                <span class="m-menu__link-text">
                                    Esquemas
                                </span>
                                <i class="m-menu__ver-arrow la la-angle-right"></i>
                            </a>
                        </li>*@
                    </ul>
                </div>
                <!-- END: Aside Menu -->
            </div>
            <!-- END: Left Aside -->


            <div id="tabDashboard" class="m-grid__item m-grid__item--fluid m-wrapper currentSelected">
               <div class="m-content">
                        <div class="row m-portlet--full-height">
                            <div class="col-lg-12">
                                <div class="m-portlet m-portlet--full-height">
                                    <div class="m-portlet__head">
                                        <div class="m-portlet__head-tools">

                                            <ul class="nav nav-pills nav-pills--brand m-nav-pills--align-righ
                                                    m-nav-pills--btn-pill m-nav-pills--btn-sm" role="tablist">
                                                <li class="m-portlet__head-caption m--margin-right-10">
                                                    <div class="m-portlet__head-title">
                                                        <span class="m-portlet__head-text">
                                                            WorkFlows
                                                        </span>
                                                    </div>
                                                </li>
                                            </ul>
                                        </div>

                                        <div class="m-portlet__head-tools">
                                            <ul class="m-portlet__nav">
                                                <li class="m-portlet__nav-item">
                                                    <div class="m-dropdown m-dropdown--inline m-dropdown--arrow m-dropdown--align-right m-dropdown--align-push" m-dropdown-toggle="hover" aria-expanded="true">
                                                        <a href="/" class="m-portlet__nav-link btn btn-lg btn-secondary  m-btn m-btn--icon m-btn--icon-only m-btn--pill  m-dropdown__toggle">
                                                            <i class="la la-ellipsis-h m--font-brand"></i>
                                                        </a>
                                                        <div class="m-dropdown__wrapper">
                                                            <span class="m-dropdown__arrow m-dropdown__arrow--right m-dropdown__arrow--adjust"></span>
                                                            <div class="m-dropdown__inner">
                                                                <div class="m-dropdown__body">
                                                                    <div class="m-dropdown__content">
                                                                        <ul class="m-nav">
                                                                            <li class="m-nav__item">
                                                                                <a href="#newScheme" data-toggle="modal" class="m-nav__link">
                                                                                    <i class="m-nav__link-icon flaticon-add"></i>
                                                                                    <span class="m-nav__link-text">
                                                                                        Nuevo esquema de WorkFlow
                                                                                    </span>
                                                                                </a>
                                                                            </li>

                                                                            <li class="m-nav__section">
                                                                                <span class="m-nav__section-text">
                                                                                    Useful Links
                                                                                </span>
                                                                            </li>
                                                                            <li class="m-nav__item">
                                                                                <a href="/" class="m-nav__link">
                                                                                    <i class="m-nav__link-icon flaticon-info"></i>
                                                                                    <span class="m-nav__link-text">
                                                                                        FAQ
                                                                                    </span>
                                                                                </a>
                                                                            </li>
                                                                        </ul>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-lg-7">
                                            <div class="m-portlet m-portlet--full-height" style="margin:10px;">
                                                <div class="m-portlet__body">
                                                    <style>
                                                        #workflowToolbar {
                                                            width: 100%;
                                                            display: block;
                                                            height: 40px;
                                                            border-bottom: 1px solid #eee;
                                                        }
                                                    </style>
                                                    <div id="workflowToolbar">
                                                        <div class="float-left">
                                                            <ul class="nav m-nav-pills--align-left" role="tablist">
                                                                <li class="nav-item m-tabs__item">
                                                                    <input type="text" id="tbWorkflow" placeholder="Workflow..."
                                                                           class="form-control">
                                                                </li>
                                                            </ul>
                                                        </div>
                                                        <div class="float-right">
                                                            <ul class="nav m-nav-pills--align-left" role="tablist">
                                                                <li class="datepickerSearchWorkFlows nav-item m-tabs__item">
                                                                </li>
                                                            </ul>
                                                        </div>
                                                    </div>

                                                    <table id="dataTableWorkFlows">
                                                        <thead>
                                                            <tr>
                                                                <th>WorkFlow</th>
                                                                <th class="color-blue m--font-bold">Totales</th>
                                                                <th class="color-green">Finalizados</th>
                                                                <th class="color-orange">En Proceso</th>
                                                                <th class="color-red">Error</th>
                                                            </tr>
                                                        </thead>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-lg-5">
                                            <div id="canvas-holder" style="padding:10px 0px;">
                                                <canvas id="pie-area"></canvas>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="m--space-30"></div>

                        <div class="row">
                            <div class="col-xl-12">
                                <div class="m-portlet m-portlet--mobile">
                                    <div class="m-portlet__head">
                                        <div class="m-portlet__head-caption">
                                            <div class="m-portlet__head-title">
                                                <span class="m-portlet__head-text">
                                                    Procesos
                                                </span>
                                            </div>
                                        </div>
                                        <div class="m-portlet__head-tools">
                                            <ul class="m-portlet__nav">
                                                <li class="m-portlet__nav-item">
                                                    <div class="m-dropdown m-dropdown--inline m-dropdown--arrow m-dropdown--align-right m-dropdown--align-push" m-dropdown-toggle="hover" aria-expanded="true">
                                                        <a href="/#" class="m-portlet__nav-link btn btn-lg btn-secondary  m-btn m-btn--icon m-btn--icon-only m-btn--pill  m-dropdown__toggle">
                                                            <i class="la la-ellipsis-h m--font-brand"></i>
                                                        </a>
                                                        <div class="m-dropdown__wrapper">
                                                            <span class="m-dropdown__arrow m-dropdown__arrow--right m-dropdown__arrow--adjust"></span>
                                                            <div class="m-dropdown__inner">
                                                                <div class="m-dropdown__body">
                                                                    <div class="m-dropdown__content">
                                                                        <ul class="m-nav">
                                                                            <li class="m-nav__section m-nav__section--first">
                                                                                <span class="m-nav__section-text">
                                                                                    Quick Actions
                                                                                </span>
                                                                            </li>
                                                                            <li class="m-nav__item">
                                                                                <a href="/" class="m-nav__link">
                                                                                    <i class="m-nav__link-icon flaticon-share"></i>
                                                                                    <span class="m-nav__link-text">
                                                                                        Create Post
                                                                                    </span>
                                                                                </a>
                                                                            </li>
                                                                            <li class="m-nav__item">
                                                                                <a href="/" class="m-nav__link">
                                                                                    <i class="m-nav__link-icon flaticon-chat-1"></i>
                                                                                    <span class="m-nav__link-text">
                                                                                        Send Messages
                                                                                    </span>
                                                                                </a>
                                                                            </li>
                                                                            <li class="m-nav__item">
                                                                                <a href="/" class="m-nav__link">
                                                                                    <i class="m-nav__link-icon flaticon-multimedia-2"></i>
                                                                                    <span class="m-nav__link-text">
                                                                                        Upload File
                                                                                    </span>
                                                                                </a>
                                                                            </li>
                                                                            <li class="m-nav__section">
                                                                                <span class="m-nav__section-text">
                                                                                    Useful Links
                                                                                </span>
                                                                            </li>
                                                                            <li class="m-nav__item">
                                                                                <a href="/" class="m-nav__link">
                                                                                    <i class="m-nav__link-icon flaticon-info"></i>
                                                                                    <span class="m-nav__link-text">
                                                                                        FAQ
                                                                                    </span>
                                                                                </a>
                                                                            </li>
                                                                            <li class="m-nav__item">
                                                                                <a href="/" class="m-nav__link">
                                                                                    <i class="m-nav__link-icon flaticon-lifebuoy"></i>
                                                                                    <span class="m-nav__link-text">
                                                                                        Support
                                                                                    </span>
                                                                                </a>
                                                                            </li>
                                                                            <li class="m-nav__separator m-nav__separator--fit m--hide"></li>
                                                                            <li class="m-nav__item m--hide">
                                                                                <a href="/#" class="btn btn-outline-danger m-btn m-btn--pill m-btn--wide btn-sm">
                                                                                    Submit
                                                                                </a>
                                                                            </li>
                                                                        </ul>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                    <div class="m-portlet__body">
                                        <div class="row">
                                            <div class="col-12">
                                                <table id="dataTableProcesos">
                                                    <thead>
                                                        <tr>
                                                            <th>WorkFlow</th>
                                                            <th>Localizador</th>
                                                            <th>Estado Actual</th>
                                                            <th>Tags</th>
                                                            <th>Última Actualización</th>
                                                        </tr>
                                                    </thead>
                                                    <tfoot>
                                                        <tr>
                                                            <th class="textSearch" title="WorkFlow">WorkFlow</th>
                                                            <th class="textSearch" title="Localizador">Localizador</th>
                                                            <th class="textSearch" title="EstadoActual">EstadoActual</th>
                                                            <th class="textSearch" title="Tags">Tags</th>
                                                            <th class="datepickerSearch">UltimaActualizacion</th>
                                                        </tr>
                                                    </tfoot>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
            </div>

            <div id="tabEsquemas" class="m-grid__item m-grid__item--fluid m-wrapper">
                <div class="m-content">
                    <div class="row m-portlet--full-height">
                        <div class="col-lg-12">
                            <div class="m-portlet m-portlet--full-height">
                                <div class="m-portlet__head">
                                    <div class="m-portlet__head-tools">

                                        <ul class="nav nav-pills nav-pills--brand m-nav-pills--align-righ
                                                    m-nav-pills--btn-pill m-nav-pills--btn-sm" role="tablist">
                                            <li class="m-portlet__head-caption m--margin-right-10">
                                                <div class="m-portlet__head-title">
                                                    <span class="m-portlet__head-text">
                                                        Esquemas
                                                    </span>
                                                </div>
                                            </li>
                                        </ul>
                                    </div>

                                    <div class="m-portlet__head-tools">
                                        <ul class="m-portlet__nav">
                                            <li class="m-portlet__nav-item">
                                                <div class="m-dropdown m-dropdown--inline m-dropdown--arrow m-dropdown--align-right m-dropdown--align-push" m-dropdown-toggle="hover" aria-expanded="true">
                                                    <a href="/" class="m-portlet__nav-link btn btn-lg btn-secondary  m-btn m-btn--icon m-btn--icon-only m-btn--pill  m-dropdown__toggle">
                                                        <i class="la la-ellipsis-h m--font-brand"></i>
                                                    </a>
                                                    <div class="m-dropdown__wrapper">
                                                        <span class="m-dropdown__arrow m-dropdown__arrow--right m-dropdown__arrow--adjust"></span>
                                                        <div class="m-dropdown__inner">
                                                            <div class="m-dropdown__body">
                                                                <div class="m-dropdown__content">
                                                                    <ul class="m-nav">
                                                                        <li class="m-nav__item">
                                                                            <a href="#newScheme" data-toggle="modal" class="m-nav__link">
                                                                                <i class="m-nav__link-icon flaticon-add"></i>
                                                                                <span class="m-nav__link-text">
                                                                                    Nuevo Esquema
                                                                                </span>
                                                                            </a>
                                                                        </li>
                                                                        <li class="m-nav__item">
                                                                            <a href="/" class="m-nav__link">
                                                                                <i class="m-nav__link-icon flaticon-info"></i>
                                                                                <span class="m-nav__link-text">
                                                                                    FAQ
                                                                                </span>
                                                                            </a>
                                                                        </li>
                                                                    </ul>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </li>
                                        </ul>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-lg-12">
                                        <div class="m-portlet m-portlet--full-height" style="margin:10px;">
                                            <div class="m-portlet__body">
                                                <table id="dataTableSchemes">
                                                    <thead>
                                                        <tr>
                                                            <th>Esquema</th>
                                                            <th>Base de datos</th>
                                                            <th>Descripción</th>
                                                            <th>Servicio</th>
                                                        </tr>
                                                    </thead>
                                                    <tfoot>
                                                        <tr>
                                                            <th class="textSearch" title="SCHEME_NAME">Esquema</th>
                                                            <th class="textSearch" title="DB_SCHEME_NAME">Base de datos</th>
                                                            <th></th>
                                                            <th></th>
                                                        </tr>
                                                    </tfoot>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- end:: Body -->
        <!-- begin::Footer -->
        <footer class="m-grid__item		m-footer ">
            <div class="m-container m-container--fluid m-container--full-height m-page__container">
                <div class="m-stack m-stack--flex-tablet-and-mobile m-stack--ver m-stack--desktop">
                    <div class="m-stack__item m-stack__item--left m-stack__item--middle m-stack__item--last">
                        <span class="m-footer__copyright">
                            2018 &copy; AntWay
                            <a href="http://antway.org/" target="_blank" class="m-link">
                                AntWay
                            </a>
                            |
                            <a href="https://flashdata.org/" target="_blank" class="m-link">
                                Flash Data
                            </a>
                        </span>
                    </div>
                    <div class="m-stack__item m-stack__item--right m-stack__item--middle m-stack__item--first">
                        <ul class="m-footer__nav m-nav m-nav--inline m--pull-right">
                            <li class="m-nav__item">
                                <a href="https://flashdata.org/sobrenosotros/" target="_blank" class="m-nav__link">
                                    <span class="m-nav__link-text">
                                        Sobre nosotros
                                    </span>
                                </a>
                            </li>
                           </ul>
                    </div>
                </div>
            </div>
        </footer>
        <!-- end::Footer -->
    </div>
    <!-- end:: Page -->
    <!-- begin::Scroll Top -->
    <div id="m_scroll_top" class="m-scroll-top">
        <i class="la la-arrow-up"></i>
    </div>
    <!-- end::Scroll Top -->
    <!--begin::Base Scripts -->
    <script src="/assets/vendors/base/vendors.bundle.js" type="text/javascript"></script>
    <script src="/assets/demo/demo3/base/scripts.bundle.js" type="text/javascript"></script>
    <!--end::Base Scripts -->
    <!--begin::Page Vendors -->
    <script src="/assets/vendors/custom/fullcalendar/fullcalendar.bundle.js" type="text/javascript"></script>
    <!--end::Page Vendors -->
    <!--begin::Page Snippets -->
    <script src="/assets/app/js/dashboard.js" type="text/javascript"></script>
    <!--end::Page Snippets -->
    <!-- ModalBox newScheme -->
    <div class="modal fade in" id="newScheme" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Nuevo Esquema</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label>Nombre esquema del WorkFlow:</label>
                        <input type="text" id="newSchemeName" class="form-control" />
                    </div>
                    <div class="form-group">
                        <label>Esquema Base de datos:</label>
                        @Html.DropDownListFor(model => model.NewSchemeViewModel.NewSchemeDataBase,
                                                         Model.NewSchemeViewModel.DBSchemesListItems, "-- Seleccionar --", new
                                                         {
                                                             @class = "form-control",
                                                                    //oninput = "setCustomValidity('') ",
                                                                    id = "newShemeDataBase",
                                                             required = "required"
                                                         })
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary btn-outline" data-dismiss="modal">Cerrar</button>
                    <button type="button" id="btnNewScheme" class="btn btn-primary" disabled>Crear Esquema</button>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>


</body>
<!-- end::Body -->
</html>


@{
    Html.RenderPartial("_DataTables");
}

<style>
    /* Header CSS */
    .m-brand {
        padding: 5px 0px;
    }

    /* GENERAL CONTENT */
    .m-wrapper { display: none; }
        .m-wrapper.currentSelected { display:block; }
    
    /* DataTable general CSS */
    tbody tr:hover {
        background-color: #f2efef;
        cursor: pointer;
    }

    tr.even {
        background-color: #fbf9f9;
    }

    tr.odd {
        background-color: #fdfafa;
    }

    /* DASHBOARD tab content CSS */
    tfoot th.datepickerSearch {
        font-weight: normal !important;
        font-size: 13px;
    }

    table#dataTableWorkFlows {
        width: 95%;
        margin: 0 auto;
        font-size: 17px;
    }

    table#dataTableWorkFlows {
        width: 80%;
        margin: 0 auto;
        font-size: 17px;
    }

    #dataTableWorkFlows tr.summary {
        background-color: #ebeff7 !important;
        font-weight: bold;
    }

    #dataTableProcesos tbody tr:hover {
        background-color: #f2efef;
        cursor: pointer;
    }

    table#dataTableProcesos {
        width: 80%;
        margin: 0 auto;
        font-size: 17px;
    }

    #dataTableProcesos tfoot tr {
        background-color: #f2efef;
    }

    #dataTableProcesos .processTag {
        font-size: 11px;
        border: 1px solid #ccc;
        padding: 4px;
        border-radius: 5px;
        background-color: #defffb;
        margin: 1px;
    }

    .color-red { color: rgb(255, 99, 132) }
    .color-orange { color: rgb(255, 159, 64)}
    .color-green {color: rgb(75, 192, 192)}
    .color-blue {color: rgb(54, 162, 235)}

    /* NewScheme modal CSS */
    #newScheme .modal-dialog, #confirmPrompt .modal-dialog, #alert .modal-dialog {
        margin: 180px auto;
        width: 700px;
        background-color: white;
    }
</style>

<script>

    window.onload = function () {

        window.selectTab = function (tab) {
            $(".m-wrapper").removeClass("currentSelected");
            $("#" + tab).addClass("currentSelected");

            $('li[data-tabname]').removeClass("m-menu__item--active");
            $('li[data-tabname="' + tab + '"]').addClass("m-menu__item--active");

            if (tab == 'tabEsquemas') {
                window.dataTableSchemes.bind();
            }
        }

        //**************  DASHBOARD ***************
        //*****************************************
        //WORKFLOWS
        window.datePickerWorkFlows = {
            from: new Date(),
            to: new Date(),
            that: this,
            getDateFilters: function () {
                var filterDates = [];

                filterDates.push({
                    field: 'From',
                    value: this.from,
                    type: 'Date',
                });
                filterDates.push({
                    field: 'To',
                    value: this.to,
                    type: 'Date',
                });

                return filterDates;
            },
            dateSelected: function (start, end, label) {
                var me = window.datePickerWorkFlows;

                var range = start.format('DD/MM/YYYY') + ' - ' + end.format('DD/MM/YYYY');
                $('#datePickerWorkFlows .m-subheader__daterange-date').html(range);
                me.from = new Date(start.format('YYYY'), start.format('MM') - 1, start.format('DD'));
                me.to = new Date(end.format('YYYY'), end.format('MM') - 1, end.format('DD'));

                if (window.dataTableWorkFlows == undefined) return;
                var filterFields = window.dataTableWorkFlows.getFilters();
                window.dataTableWorkFlows.dataTable.search(JSON.stringify(filterFields)).draw();
            },

            bind: function () {
                $('.datepickerSearchWorkFlows')
                    .html($("#html_daterangepicker")
                        .html()
                        .replace("{id}", "datePickerWorkFlows"));

                $("#datePickerWorkFlows").daterangepicker();
                if (0 != $("#datePickerWorkFlows").length) {
                    var e = $("#datePickerWorkFlows"), t = moment(), a = moment();
                    e.daterangepicker({
                        startDate: t, endDate: a, opens: "left",
                        ranges: {
                            "Hoy": [moment(), moment()],
                            "Ayer": [moment().subtract(1, "days"), moment().subtract(1, "days")],
                            "Últimos 7 días": [moment().subtract(6, "days"), moment()],
                            "Últimos 30 días": [moment().subtract(29, "days"), moment()],
                            "Este mes": [moment().startOf("month"), moment().endOf("month")],
                            "El mes pasado": [moment().subtract(1, "month").startOf("month"),
                            moment().subtract(1, "month").endOf("month")]
                        }
                    }, function (start, end, label) {
                        window.datePickerWorkFlows.dateSelected(start, end, label);
                    });
                };

                var range = t.format('DD/MM/YYYY') + ' - ' + a.format('DD/MM/YYYY');
                $('#datePickerWorkFlows .m-subheader__daterange-date').html(range);
            }
        }

        window.dataTableWorkFlows = {
            tableDefinition: {
                "bServerSide": true,
                "sAjaxSource": "/home/GetWorkFlowsDataTable",
                "bProcessing": true,
                "iDisplayLength": 6,
                "language": customDataTableLangES,
                "createdRow": function (row, data, dataIndex) {
                    $(row).attr("data-id", data[0]);
                    $(row).attr("data-values", data[2] + "," + data[3] + "," + data[4]);
                    if (data[0] == 'TOTAL') {
                        $(row).addClass("summary");

                        window.pie.pieDefinition.data.datasets[0].data = $(row).data('values').split(',');
                        //window.pie.pieDefinition.options.title.text = $(row).data('id');
                        window.pie.chartPie.update();
                    }
                },
                "aoColumns": [
                    {
                        "sName": "WorkFlow",
                        "mRender": function (oObj) {
                            if (oObj == "TOTALES") return oObj;
                            var result = "";
                            result += '<a href="/designer/Index/' + oObj + '" target="_blank">' + oObj + '</span>';
                            return result;
                        }
                    },
                    {
                        "sName": "Totales",
                        "mRender": function (oObj) {
                            var result = "";
                            result += '<span class="color-blue bold">' + oObj + '</span>';
                            return result;
                        }
                    },
                    {
                        "sName": "Finalizados",
                        "mRender": function (oObj) {
                            var result = "";
                            result += '<span class="color-green">' + oObj + '</span>';
                            return result;
                        }
                    },
                    {
                        "sName": "EnProceso",
                        "mRender": function (oObj) {
                            var result = "";
                            result += '<span class="color-orange">' + oObj + '</span>';
                            return result;
                        }
                    },
                    {
                        "sName": "Error",
                        "mRender": function (oObj) {
                            var result = "";
                            result += '<span class="color-red">' + oObj + '</span>';
                            return result;
                        }
                    }
                ],
            },

            getFilters: function () {
                var filterFields = [];
                if ($("#tbWorkflow").val().length > 0) {
                    filterFields.push({
                        field: "SCHEMECODE",
                        value: $("#tbWorkflow").val(),
                    });
                }

                filterFields = filterFields.concat(window.datePickerWorkFlows.getDateFilters());

                return filterFields;
            },

            dataTable: {},

            bind: function () {
                //$('#dataTableWorkFlows tfoot th.textSearch').each(function () {
                //    var title = $(this).text();
                //    if (title == undefined || title == null)
                //        return;
                //    $(this).html('<input type="text" data-field="' + title + '" placeholder="' + title + '" />');
                //});

                //$('#dataTableProcesos tfoot th.datepickerSearch')
                //    .html($("#html_daterangepicker")
                //        .html()
                //        .replace("{id}", "datepickerProcesos"));

                this.dataTable = $('#dataTableWorkFlows')
                    .DataTable(window.dataTableWorkFlows.tableDefinition);

                $('#dataTableWorkFlows tbody').on('click', 'tr', function () {
                    window.pie.pieDefinition.data.datasets[0].data = $(this).data('values').split(','); //[1, 2, 5];
                    window.pie.pieDefinition.options.title.text = $(this).data('id');
                    window.pie.chartPie.update();
                });

                this.bindSearchColumns();
            },

            bindSearchColumns: function () {
                var me = this;
                $('#tbWorkflow').on('keyup change', function (e) {
                    if (e.keyCode == 13 && $(this).is(":focus")) {
                        if (me.dataTable.search() !== this.value) {
                            var filterFields = me.getFilters();
                            me.dataTable.search(JSON.stringify(filterFields)).draw();
                        }
                    }
                });
            }
        }

        window.pie = {
            chartPie: {},

            pieDefinition: {
                type: 'doughnut', // bar ,doughnut, pie
                data: {
                    datasets: [{
                        data: [0, 0, 0],//[17, 18, 2],
                        backgroundColor: [
                            window.chartColors.green,
                            window.chartColors.orange,
                            window.chartColors.red,
                        ],
                    }],
                    labels: ['Finalizados', 'En proceso', 'Error']
                },
                options: {
                    responsive: true,
                    legend: {
                        position: 'right',
                    },
                    title: {
                        display: true,
                        text: 'TODAS'
                    },
                    animation: {
                        animateScale: true,
                        animateRotate: true
                    }
                }
            }
        };

        var ctx = document.getElementById('pie-area').getContext('2d');
        window.pie.chartPie = new Chart(ctx, window.pie.pieDefinition);

        //PROCESOS
        window.datePickerProcesos = {
            from: new Date(),
            to: new Date(),
            that: this,
            getDateFilters: function () {
                var filterDates = [];

                filterDates.push({
                    field: 'From',
                    value: this.from,
                    type: 'Date',
                });
                filterDates.push({
                    field: 'To',
                    value: this.to,
                    type: 'Date',
                });

                return filterDates;
            },
            dateSelected: function (start, end, label) {
                var me = window.datePickerProcesos;

                var range = start.format('DD/MM/YYYY') + ' - ' + end.format('DD/MM/YYYY');
                $('#dataTableProcesos .m-subheader__daterange-date').html(range);
                me.from = new Date(start.format('YYYY'), start.format('MM') - 1, start.format('DD'));
                me.to = new Date(end.format('YYYY'), end.format('MM') - 1, end.format('DD'));

                if (window.dataTableProcesos == undefined) return;
                var filterFields = window.dataTableProcesos.getFilters();
                window.dataTableProcesos.dataTable.search(JSON.stringify(filterFields)).draw();
            },

            bind: function () {
                $("#datepickerProcesos").daterangepicker();
                if (0 != $("#datepickerProcesos").length) {
                    var e = $("#datepickerProcesos"), t = moment(), a = moment();
                    e.daterangepicker({
                        startDate: t, endDate: a, opens: "left",
                        ranges: {
                            "Hoy": [moment(), moment()],
                            "Ayer": [moment().subtract(1, "days"), moment().subtract(1, "days")],
                            "Últimos 7 días": [moment().subtract(6, "days"), moment()],
                            "Últimos 30 días": [moment().subtract(29, "days"), moment()],
                            "Este mes": [moment().startOf("month"), moment().endOf("month")],
                            "El mes pasado": [moment().subtract(1, "month").startOf("month"),
                            moment().subtract(1, "month").endOf("month")]
                        }
                    }, window.datePickerProcesos.dateSelected);
                };

                var range = t.format('DD/MM/YYYY') + ' - ' + a.format('DD/MM/YYYY');
                $('#dataTableProcesos .m-subheader__daterange-date').html(range);
            }
        }

        window.dataTableProcesos = {
            tableDefinition: {
                "bServerSide": true,
                "sAjaxSource": "/home/GetProccessesHistoryDataTable",
                "bProcessing": true,
                "iDisplayLength": 20,
                "language": customDataTableLangES,
                "order": [[4, 'desc']],
                "aoColumns": [
                    {
                        "sName": "WorkFlow",
                        "mRender": function (oObj) {
                            var result = "";
                            result += '<a href="/designer/Index/' + oObj + '" target="_blank">' + oObj + '</span>';
                            return result;
                        }
                    },
                    {
                        "sName": "Localizador",
                        "mRender": function (oObj) {
                            return oObj;
                        }
                    },
                    { "sName": "Estado Actual" },
                    {
                        "sName": "Tags",
                        "mRender": function (oObj) {
                            var tags = oObj.split(',');
                            var result = "";
                            for (var i = 0; i < tags.length; i++) {
                                result += '<span class="m-badge m-badge--brand m-badge--wide" style="margin-right:3px">' + tags[i] + '</span>';
                            }
                            return result;
                        }
                    },
                    { "sName": "Última Actualización" }
                ],
            },

            getFilters: function () {
                var filterFields = [];
                $("#dataTableProcesos tfoot input").each(function (index, item) {
                    filterFields.push({
                        field: $(this).data('field'),
                        value: $(this).val()
                    });
                });

                filterFields = filterFields.concat(window.datePickerProcesos.getDateFilters());

                return filterFields;
            },

            dataTable: {},

            bind: function () {
                $('#dataTableProcesos tfoot th.textSearch').each(function () {
                    var title = this.title;
                    var name = $(this).text();
                    if (title == undefined || title == null)
                        return;
                    $(this).html('<input type="text" data-field="' + title + '" placeholder="' + name + '" />');
                });

                $('#dataTableProcesos tfoot th.datepickerSearch')
                    .html($("#html_daterangepicker")
                        .html()
                        .replace("{id}", "datepickerProcesos"));

                this.dataTable = $('#dataTableProcesos')
                    .DataTable(window.dataTableProcesos.tableDefinition);

                $('#dataTableProcesos tbody').on('click', 'tr', function () {
                    var data = window.dataTableProcesos.dataTable.row(this).data();
                    if (data == undefined) return;
                    //console.log("id", data[1]);
                });

                this.bindSearchColumns();
            },

            bindSearchColumns: function () {
                var me = this;
                this.dataTable.columns().every(function () {
                    $('input', this.footer()).on('keyup change', function (e) {
                        if (e.keyCode == 13 && $(this).is(":focus")) {
                            if (me.dataTable.search() !== this.value) {
                                var filterFields = me.getFilters();
                                me.dataTable.search(JSON.stringify(filterFields)).draw();
                            }
                        }
                    });
                });
            }
        }

        //Llamada a métodos bind() de todos los objetos del tabDashboard
        window.dataTableWorkFlows.bind();
        window.datePickerWorkFlows.bind();

        window.dataTableProcesos.bind();
        window.datePickerProcesos.bind();


        //**************  ESQUEMAS ***************
        //*****************************************

        (function bindSchemesModalBox() {
            $('#newScheme').on('show.bs.modal', function () {
                $("#newSchemeName").val('');
                $("#newShemeDataBase").val('');
                $("#btnNewScheme").attr("disabled", "disabled");
            })


            $("#newShemeDataBase").on("change", function () {
                if ($(this).val() == "" || $("#newSchemeName").val().length <= 4) {
                    $("#btnNewScheme").attr("disabled", "disabled");
                    return;
                }

                $("#btnNewScheme").removeAttr("disabled");
            })

            $("body").on("keyup", "#newSchemeName", function () {
                if ($("#newSchemeName").val().length <= 4 || $("#newShemeDataBase").val() == "") {
                    $("#btnNewScheme").attr("disabled", "disabled");
                    return;
                }

                $("#btnNewScheme").removeAttr("disabled");
            });

            $("#btnNewScheme").click(function () {
                var newScheme = {
                    NewSchemeName: $("#newSchemeName").val().toUpperCase().replace(" ", "_"),
                    NewSchemeDataBase: $("#newShemeDataBase").val(),
                }

                var root = '@Url.Content(@"~/Home/")';

                $.ajax({
                    type: "POST",
                    url: root + "/NewScheme/",
                    data: newScheme,
                    success: function (d) {
                        $("#newScheme").modal("toggle");
                        window.open('/designer/Index/' + newScheme.NewSchemeName);
                    }
                });
            });
        })();

    };

    window.dataTableSchemes = {
        tableDefinition: {
            "bServerSide": true,
            "sAjaxSource": "/home/GetSchemesDataTable",
            "bProcessing": true,
            "iDisplayLength": 20,
            "language": customDataTableLangES,
            "createdRow": function (row, data, dataIndex) {
                //$(row).attr("data-id", data[0]);
                //$(row).attr("data-values", data[2] + "," + data[3] + "," + data[4]);
                //if (data[0] == 'TOTAL') {
                //    $(row).addClass("summary");

                //    window.pie.pieDefinition.data.datasets[0].data = $(row).data('values').split(',');
                //    //window.pie.pieDefinition.options.title.text = $(row).data('id');
                //    window.pie.chartPie.update();
                //}
            },
            "aoColumns": [
                {
                    "sName": "WorkFlow",
                    "mRender": function (oObj) {
                        if (oObj == "TOTAL") return oObj;
                        var result = "";
                        result += '<a href="/designer/Index/' + oObj + '" target="_blank">' + oObj + '</span>';
                        return result;
                    }
                },
                {
                    "sName": "Esquema Base de datos",
                },
                {
                    "sName": "Descripcion",
                },
                {
                    "sName": "Servicio",
                }
            ],
        },

        getFilters: function () {
            var filterFields = [];
            $("#dataTableSchemes tfoot input").each(function (index, item) {
                filterFields.push({
                    field: $(this).data('field'),
                    value: $(this).val()
                });
            });

            return filterFields;
        },

        dataTable: null,

        bind: function () {
            $('#dataTableSchemes tfoot th.textSearch').each(function () {
                var title = this.title;
                var name = $(this).text();
                if (title == undefined || title == null)
                    return;
                $(this).html('<input type="text" data-field="' + title + '" placeholder="' + name + '" />');
            });

            if (this.dataTable == null) {
                this.dataTable = $('#dataTableSchemes')
                    .DataTable(window.dataTableSchemes.tableDefinition);

                this.bindSearchColumns();
            }
        },

        bindSearchColumns: function () {
            var me = this;
            this.dataTable.columns().every(function () {
                $('input', this.footer()).on('keyup change', function (e) {
                    if (e.keyCode == 13 && $(this).is(":focus")) {
                        if (me.dataTable.search() !== this.value) {
                            var filterFields = me.getFilters();
                            me.dataTable.search(JSON.stringify(filterFields)).draw();
                        }
                    }
                });
            });
        }
    }
   

</script>
